{% extends "base.html" %}

{% for cat, msg in get_flashed_messages(True) %}
<ul class="list-group">
  <li class="list-group-item list-group-item-{{cat}}">{{msg}}</li>
</ul>
{%endfor %}



<html>
{% block head %}
{{ super() }}
<style type="text/css">
  .important {
    color: green;
  }
</style>
{% endblock %}

{% block content %}

{% if desc %}
  <h1>{{ desc }}</h1>
{% endif %}
<div class="post-father">
{% for product in products.items %}
<div class="post">
  <div class="post-image ">
    <img src="/static/products_pics/{{product.pictures[0]}}" alt="">
  </div>
  <div class="post-inf">
    <h2><a href="{{ url_for('products.product', product_id=product.id) }}">{{product.title}}</a></h2>
    <p>{{product.price}}$</p>
    <p>{{ product.description | truncate(100)}}</p>
    <b>{{ product.views}} people saw this.</b>
  </div>
</div>
{% endfor %}
</div>
<!-- Pagination Links-->
<div class="text-right">
  <a href="{{ url_for('products.get_products', page=products.prev_num) }}"
     class="btn btn-outline-dark 
     {% if products.page == 1 %}disabled{% endif %}">
      &laquo;
  </a>
<!-- Loop through the number of pages to display a link for each-->
  {% for page_num in products.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
{% if page_num %}
<!-- Check for the active page and set the link to "Active"-->
          {% if products.page == page_num %}
          <a href="{{ url_for('products.get_products', page=page_num) }}"
             class="btn btn-primary">
              {{ page_num }}
          </a>
          {% else %}
          <a href="{{ url_for('products.get_products', page=page_num) }}"
             class="btn btn-dark">
              {{ page_num }}
          </a>
          {% endif %}
      {% else %}
          ...
      {% endif %}
  {% endfor %}
  <a href="{{ url_for('products.get_products', page=products.next_num) }}"
     class="btn btn-dark 
     {% if products.page == products.pages %}disabled{% endif %}">
      &raquo;
  </a>
</div>
<p class="text-right mt-3">
  Showing page {{ products.page }} of {{ products.pages }}
</p>

{% endblock %}